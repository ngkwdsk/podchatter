<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-5" id="podcast-cards">
  <% podcasts.each do |podcast| %>
    <div class="col">
      <div class="card h-100">
        <div class="aspect-ratio-box">
          <%= link_to podcast_path(podcast.id), data: { turbo: false } do %>
            <%= image_tag(podcast.image, class: 'aspect-ratio-box-inside') %>
          <% end %>
        </div>
        <div class="card-body d-flex flex-column">
          <h5 class="card-title"><%= podcast.name %></h5>
          <p class="card-text description-text flex-grow-1" data-full-text="<%= podcast.description %>">
            <%= podcast.description %>
          </p>
          <% if user_signed_in? %>
            <div class="like-container">
              <%= render partial: "likes/like", locals: { podcast: podcast.original_podcast } %>
            </div>
          <% end %>
        </div>
        <% if podcast.latest_episode.present? %>
          <div class="card-footer">
            <div class="episode">
              <iframe id="spotify-embed-<%= podcast.id %>" class="spotify-embed" src="https://open.spotify.com/embed/episode/<%= podcast.latest_episode[:id] %>" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>