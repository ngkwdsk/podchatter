<h3>ポッドキャスト名で検索</h3>
<%= form_with url: search_podcasts_path, method: :get, local: true do |form| %>
<%= form.text_field :search %>
<%= form.submit 'Podcast名で検索', name: nil %>
<% end %>

<h1>検索結果</h1>
<div>
  <% if @searchpodcasts.present? %>
    <% @searchpodcasts.each do |searchpodcast| %>
      <div>
        <h3><%= searchpodcast.name %></h3>
          <% if searchpodcast.images.any? %>
            <% image = searchpodcast.images[1] %>
            <%= image_tag(image["url"]) %>
          <% else %>
            <%= image_tag("default.jpg") %>
          <% end %>
          <h3><%= searchpodcast.description.truncate(100) %></h3>
          <% if Podcast.exists?(show_id: searchpodcast.id) %>
          <% podcast = Podcast.find_by(show_id: searchpodcast.id) %>
          <%= link_to "聴きたい！", podcast_likes_path(podcast_id: podcast.id, show_id: searchpodcast.id), data: { "turbo-method": :post }, class: 'btn btn-default' %>
          <% else %>
          <%= link_to "登録する", podcasts_path(show_id: searchpodcast.id), data: { "turbo-method": :post }, class: 'btn btn-default' %>
          <% end %>
      </div>
    <% end %>
  <% else %>
    <p>該当するポッドキャストが見つかりませんでした。</p>
  <% end %>
</div>